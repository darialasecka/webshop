{% extends "shop/base.html" %}
{% load static %}

{% block title %}
{{ product.name }}
{% endblock %}

{% block content %}

<style>
	  .img-fluid
	  {
		max-width: 100%;
		height: 250px;
	  }
	  
	  #rozmiar-tekstu{
		font-size: 20px;
	  }
	  
	  @media (max-width: 991px) {
		.img-fluid
		{
			max-width: 100%;
			height: 200px;		
		}
	  
		#foto
		{
			text-align: center!important;
		}

		
	  }
</style>

<div class="product-detail row">
	<div id="foto" class="col-md-6 text-center">
		<img class="img-fluid text-center mb-4"
			src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'img/no-image.png' %}{% endif %} ">
	</div>
	<div id="tekst" class="col-md-6 ">

		<h1>{{ product.name }}</h1>
		<!--<h2><a href="{{ product.category.get_absolute_url }}">{{ product.category }}</a></h2>-->
		<h2 class="price mb-3">{{ product.price }} PLN</h2>
		<form action="{% url 'cart:cart_add' product.id %}" method="post">
			{{ cart_product_form }}
			{% csrf_token %}
		</br><input type="submit" class="btn btn-primary mt-2" value="Dodaj do koszyka">
		</form>

	</div>

	<div class="col-md-12 border-top">
		<p class="display-4">Opis</p>
		<div id="rozmiar-tekstu">
			{{ product.description|linebreaks }}
		</div>
		<p class="display-4">Specyfikacja</p>
		

		<table id="rozmiar-tekstu" class="table table-hover text-center">
			<tbody>
				{% for description in descriptions %}
				<td>{{ description.parameter }}</td>
				<td>{{ description.description }}</td>			
			  </tbody>
			{% endfor %}				  
		</table>

		
	</div>
	
	{% if recommendations %}
		<div id="recommend" class="">
		<h3>Rekomendowane produkty</h3>
			{% for item in recommendations %}
				<br><a href="{% url 'shop:product_detail' item.id item.slug %}">
					<img src="{% if item.image %}{{ item.image.url }}{% else %}{% static 'img/no-image.png' %}{% endif %}" height=200 width=250>
				<br>{{ item.name }}</a>
				<br>{{ item.price }}

				<br>
			{% endfor %}
		</div>
	{% endif %}


	<div id="recenzje" class="col-md-6 border-top mt-4">
		{% if user.is_authenticated %}
			{% if users_reviews %}
				<br>Już napisałeś recenzję tego produktu.
			{% else %}
				{% if new_review %}
					<h2>Pomyślnie dodano recenzję</h2>
				{% else %}
					<p class="display-4">Dodaj nową recenzję </p>
					<form action="" method="post">
						{{ review_form.as_p }}
						{% csrf_token %}
						<input type="submit" class="btn btn-primary" value="Dodaj recenzję">
					</form>
				{% endif %}
			{% endif %}
		{% else %}
			<h4	class="text-center pt-4">Aby napisać własną recenzję musisz się zalogować.</h4>
		{% endif %}
	</div>

	<div id="recenzje" class="col-md-6 border-top mt-4">
		<p class="display-4">Recenzje </p>
		{% for review in reviews %}
		<div class="comment border-bottom">
			{% if review.user == user %}
				<a class="btn btn-primary" href="{% url 'shop:delete_review' review.id %}">Usuń</a>
			{% endif %}

			<span>Autor: {{ review.user.username }}</span><br>
			<span>Ocena: {{ review.rating }}</span><br>
			<span>Komentarz: {{ review.body }}</span>

		</div>
		{% empty %}

		<p>Nie ma jeszcze żadnych recenzji tego produktu. </p>
		{% endfor %}

	</div>
</div>
{% endblock %}
