{% load static %}
<!DOCTYPE html>
<html>

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Custom styles for this template -->
	<link href="css/shop-homepage.css" rel="stylesheet">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

	<meta charset="utf-8" />
	<title>{% block title %}Mięsne delikatesy po okazyjnych cenach {% endblock %} </title>

	<!-- Bootstrap core CSS -->
	<link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">



	<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
	<link rel="stylesheet" href="{% static 'css/base.css' %}">

	<script src="https://kit.fontawesome.com/7ddcda0d1c.js" crossorigin="anonymous"></script>
	<style>
		body {
			padding-top: 86px;
		}

		.fa-shopping-cart {
			font-size: 30px;
		}

		.fa-user {
			font-size: 30px;
			padding: 8px;
			color: rgba(255, 255, 255, .5) !important;
		}

		#user_f {
			font-family: "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
		}



		/* The Modal (background) */
		.modal {
			display: none;
			/* Hidden by default */
			position: fixed;
			/* Stay in place */
			z-index: 1;
			/* Sit on top */
			padding-top: 100px;
			/* Location of the box */
			left: 0;
			top: 0;
			width: 100%;
			/* Full width */
			height: 100%;
			/* Full height */
			overflow: auto;
			/* Enable scroll if needed */
			background-color: rgb(0, 0, 0);
			/* Fallback color */
			background-color: rgba(0, 0, 0, 0.4);
			/* Black w/ opacity */
		}

		/* Modal Content */
		.modal-content {
			background-color: #fefefe;
			margin: auto;
			padding: 20px;
			border: 1px solid #888;
			width: 80%;
		}

		/* The Close Button */
		.close {
			color: #aaaaaa;
			float: right;
			font-size: 28px;
			font-weight: bold;
		}

		.close:hover,
		.close:focus {
			color: #000;
			text-decoration: none;
			cursor: pointer;
		}

		.qty {
			width: 20px;
			height: 20px;
			line-height: 20px;
			text-align: center;
			border-radius: 50%;
			font-size: 10px;
			color: #FFF;
			background-color: #D10024;
			float: right;
			margin-top: -8px;
			font-family: "arial";
		}
		
		@media (max-width: 991px) {
			#user_nav
			{
				position: absolute;
			}
		{


	</style>

	<meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Ensures optimal rendering on mobile devices. -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge" /> <!-- Optimal Internet Explorer compatibility -->

</head>

<body>

	<!-- Navigation -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
		<div class="container">
			<a class="navbar-brand" href="/">Sklep internetowy</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
				aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarResponsive">
				<ul class="navbar-nav ml-auto">
					<li>
						<!-- Trigger/Open The Modal -->
						<div id="wozek_z_numerkim">					
							<a id="myBtn" class="nav-link nav-item fas fa-shopping-cart">

								{% with total_items=cart|length %}
								{% if cart|length > 0 %}
									<div class="qty">{{ total_items }}</div>
								{% else %}
								<div class="qty">{{ total_items }}</div>
								{% endif %}
								{% endwith %}
							</a>
						</div>	
						<!-- The Modal -->
						<div id="myModal" class="modal">

							<!-- Modal content -->
							<div class="modal-content">
								<span class="close">&times;</span>

										<h1>Twój koszyk</h1>
										<table class="cart" style="width:100%">
											<thead>
												<tr class="border-bottom">
													<th>Obraz</th>
													<th>Produkt</th>
													<th>Ilość</th>
													<th>Usuń</th>
													<th>Cena jednostkowa</th>
													<th class="num text-right">Cena</th>
												</tr>
											</thead>
											<tbody>
												{% for item in cart %}
												{% with product=item.product %}
												<tr>
													<td>
														<a href="{{ product.get_absolute_url }}">
															<img src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'img/no-image.png' %}{% endif %}"
																height="50" width="50">
														</a>
													</td>
													<td>{{ product.name }}</td>
													<td>{{ item.quantity }}</td>
													<td><a href="{% url 'cart:cart_remove' product.id %}">Usuń</a></td>
													<td class="num">{{ item.price }} PLN</td>
													<td class="num text-right">{{ item.total_price }} PLN</td>
												</tr>
												{% endwith %}
												{% endfor %}
												<tr>
													<td colspan="5"></td>
													<td class="num border-top text-right">Wartość zakupów:
														{{ cart.get_total_price }} PLN</td>
												</tr>
											</tbody>
										</table>
										<p class="text-right">
											<a href="{% url 'shop:product_list' %}" class="button
					        light btn btn-primary">Kontynuuj zakupy</a>
											<a href="{% url 'cart:cart_detail' %}" class="button btn btn-primary">Przejdź do podsumowania</a>
										</p>
							</div>
						</div>
					</li>

					{% if user.is_authenticated %}
						<li class="nav-item">
							<a class="fas fa-user">
							</a>
							<a href="{% url 'profile:show_profile' %}"><span id="user_nav" class="h3 color-white float-right" style="color:white; padding-top: 3px" >{{ user.username }}</span></a>
						</li>

						<li class="nav-item">
							<a class="nav-link h4" href="{% url 'account:logout' %}">Wyloguj się</a>
						</li>
					{% else %}
						<li class="nav-item">
							<a class="nav-link" href="{% url 'account:login' %}">Logowanie</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="{% url 'account:register' %}">Rejestracja</a>
						</li>
					{% endif %}
				</ul>
			</div>
		</div>
	</nav>

	<div id="content" class="container">

		{% block content %}
		{% endblock %}
	</div>


	<!-- Footer -->
	<footer class="py-5 bg-dark mt-4">
		<div class="container">

			<!-- Footer Links -->
			<div class="container text-center text-md-left">

				<!-- Grid row -->
				<div class="row">

					<!-- Grid column -->
					<div class="col-md-3 mx-auto">

						<!-- Links -->
						<h5 class="font-weight-bold text-uppercase mt-3 mb-4">Links</h5>

						<ul class="list-unstyled">
							<li>
								<a href="#!">Very long link 1</a>
							</li>
							<li>
								<a href="#!">Very long link 2</a>
							</li>
							<li>
								<a href="#!">Very long link 3</a>
							</li>
							<li>
								<a href="#!">Very long link 4</a>
							</li>
						</ul>

					</div>
					<!-- Grid column -->

					<hr class="clearfix w-100 d-md-none">

					<!-- Grid column -->
					<div class="col-md-3 mx-auto">

						<!-- Links -->
						<h5 class="font-weight-bold text-uppercase mt-3 mb-4">Links</h5>

						<ul class="list-unstyled">
							<li>
								<a href="#!">Link 1</a>
							</li>
							<li>
								<a href="#!">Link 2</a>
							</li>
							<li>
								<a href="#!">Link 3</a>
							</li>
							<li>
								<a href="#!">Link 4</a>
							</li>
						</ul>

					</div>
					<!-- Grid column -->

					<hr class="clearfix w-100 d-md-none">

					<!-- Grid column -->
					<div class="col-md-3 mx-auto">

						<!-- Links -->
						<h5 class="font-weight-bold text-uppercase mt-3 mb-4">Links</h5>

						<ul class="list-unstyled">
							<li>
								<a href="#!">Link 1</a>
							</li>
							<li>
								<a href="#!">Link 2</a>
							</li>
							<li>
								<a href="#!">Link 3</a>
							</li>
							<li>
								<a href="#!">Link 4</a>
							</li>
						</ul>

					</div>
					<!-- Grid column -->

					<hr class="clearfix w-100 d-md-none">

					<!-- Grid column -->
					<div class="col-md-3 mx-auto">

						<!-- Links -->
						<h5 class="font-weight-bold text-uppercase mt-3 mb-4">Links</h5>

						<ul class="list-unstyled">
							<li>
								<a href="#!">Link 1</a>
							</li>
							<li>
								<a href="#!">Link 2</a>
							</li>
							<li>
								<a href="#!">Link 3</a>
							</li>
							<li>
								<a href="#!">Link 4</a>
							</li>
						</ul>

					</div>
					<!-- Grid column -->

				</div>
				<!-- Grid row -->

			</div>
			<!-- Footer Links -->

		</div>
		<!-- /.container -->
	</footer>

	<script>
		// Get the modal
		var modal = document.getElementById("myModal");

		// Get the button that opens the modal
		var btn = document.getElementById("myBtn");

		// Get the <span> element that closes the modal
		var span = document.getElementsByClassName("close")[0];

		// When the user clicks the button, open the modal 
		btn.onclick = function () {
			modal.style.display = "block";
		}

		// When the user clicks on <span> (x), close the modal
		span.onclick = function () {
			modal.style.display = "none";
		}

		// When the user clicks anywhere outside of the modal, close it
		window.onclick = function (event) {
			if (event.target == modal) {
				modal.style.display = "none";
			}
		}
	</script>

	<!-- Bootstrap core JavaScript -->
	<script src="vendor/jquery/jquery.min.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
		</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
		</script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
		</script>
</body>

</html>